Чтобы создать [SoundFont](manual/annexes/the-different-soundfont-formats.md#doc_sf2), нажмите кнопку :guilabel:`Создать SoundFont` на [главном экране](manual/index.md#doc_left).
Файлы SoundFont содержат трёхуровневую структуру, поэтому создание нового SoundFont предполагает три основных этапа:

* [подготовка семплов](#doc_sample),
* [создание инструментов](#doc_instrument), включающих семплы,
* [создание пресетов](#doc_preset), включающих инструменты.


## Подготовка семплов {#doc_sample}


### Загрузка семплов


Подготовка семплов начинается с **загрузки** файлов .wav.
Для этого сначала выберите категорию :guilabel:`Семплы` в [дереве](manual/soundfont-editor/tree.rst) и выберите :guilabel:`Импортировать семплы` на [панели инструментов](manual/soundfont-editor/toolbar.md#doc_edit).
Семплы могут быть получены:

* через интернет,
* записав настоящий музыкальный инструмент,
* путём синтеза с использованием специализированного ПО.


### Закольцовка семплов


Далее, семпл может потребоваться **закольцевать**, если вы хотите, чтобы он звучал дольше, чем его обычная длительность.
Например, если у вас есть только 1-секундный семпл флейты, но вы хотите, чтобы он звучал постоянно.
Это можно сделать, указав вручную или автоматически точки петли (начало и конец) в пределах границ семпла, чтобы область петли повторялась и семпл звучал дольше.
Хотя вы можете назначить точки петли вручную, использование функции «[Авто-петля](manual/soundfont-editor/tools/sample-tools.md#doc_autoloop)» для их автоматического назначения обычно даёт лучшие результаты и намного быстрее.

Чтобы назначить точки петли вручную:

1. щёлкните в [дереве](manual/soundfont-editor/tree.md) на семпле, который будет закольцован,
2. в [редакторе семплов](manual/soundfont-editor/editing-pages/sample-editor.md) произвольно расположите начало и конец петли на [графике](manual/soundfont-editor/editing-pages/sample-editor.md#doc_graph) (область отображения WAV), если цикл ещё не определён.
   Щёлкните левой кнопкой мыши в начале и правой кнопкой мыши в конце.
   Правая точка петли должна быть указана первой (поскольку правая точка по умолчанию указывает на позицию 0, а левая точка не может стоять правее правой точки).
3. нажмите кнопку :guilabel:`Воспроизведение` после выбора функции петли,
4. отрегулируйте начало и / или конец петли во время воспроизведения семпла, пока переход между двумя положениями не станет как можно более плавным.


**Примечание:** Чтобы услышать петлю в инструменте, вы должны выбрать ![loop on][loop_on] в строке параметра :guilabel:`Играть петлю` в глобальном столбце или в столбце отдельных нот в [таблице параметров](manual/soundfont-editor/editing-pages/instrument-editor.md#doc_table). ![loop on][loop_on] включает воспроизведение петли, ![loop off][loop_off] или пустая ячейка — отключает.


![Иллюстрация петли](images/loop_illustration.png "Иллюстрация петли")


### Подстройка семплов


Наконец, нужно **подстроить** семплы.
Для этого на странице редактирования [семплов](manual/soundfont-editor/editing-pages/sample-editor.md#doc_player) доступно средство калибровки (синус).
Для каждого семпла метод выглядит следующим образом:

1. начните воспроизведение (нажмите кнопку :guilabel:`Воспроизведение`), если возможно, с выбранной функцией петли,
2. выберите функцию синуса,
3. отрегулируйте ползунок громкости, чтобы слышать два звука как можно более чётко,
4. меняйте ноту в поле :guilabel:`Корневая клавиша`, пока два звука не будут наиболее близко совпадать,
5. отрегулируйте значение в поле :guilabel:`Коррекция` (в центах), чтобы окончательно подстроить семпл.
   Для этого обратите внимание на любые слышимые биения и добейтесь, чтобы они были как можно медленнее.

[Частотный анализ](manual/soundfont-editor/editing-pages/sample-editor.md#doc_freq) может быть хорошим индикатором для начала настройки.


### Другие возможности


При редактировании семплов доступно несколько средств:

* [удаление тишины](manual/soundfont-editor/tools/sample-tools.md#doc_removeblank) в начале,
* [выравнивание](manual/soundfont-editor/tools/sample-tools.md#doc_eq) звука,
* [транспонирование](manual/soundfont-editor/tools/sample-tools.md#doc_transpose),
* [нормализация](manual/soundfont-editor/tools/sample-tools.md#doc_volume) громкости,
* [регулировка баланса](manual/soundfont-editor/tools/sample-tools.md#doc_balance) стерео семплов.


## Создание инструмента {#doc_instrument}


На этом этапе предполагается, что один или несколько семплов уже доступны для создания инструмента.


### Создание инструмента и добавление семплов


Сначала нажмите :guilabel:`Новый инструмент` на [панели инструментов](manual/soundfont-editor/toolbar.md#doc_edit).
Теперь введите имя.

Затем добавьте семплы к инструменту с помощью [перетаскивания](manual/soundfont-editor/tree.md#doc_dragdrop).
В дереве вы заметите, что в инструменте появляются разделы.

**Примечание:** При создании разделов семплы не копируются, а связываются. Количество разделов не ограничено.


### Распределение разделов


Когда семплы добавляются в инструменты, они отображаются в виде разделов (столбцов) в [таблице редактора инструментов](manual/soundfont-editor/editing-pages/instrument-editor.md#doc_table).
Каждый раздел затем должен быть размещён на клавиатуре путём изменения значения :guilabel:`Диапазон клавиш` в таблице.
Считается хорошим тоном, чтобы диапазон раздела включал корневую клавишу представленного семпла.
Вся поверхность клавиатуры должна быть заполнена (например, с клавиши 36 по клавишу 96 для классической клавиатуры синтезатора).

Средство «[Авто-позиционирование семпла](manual/soundfont-editor/tools/instrument-tools.md#doc_position)» автоматически распределяет семплы по клавиатуре.


### Настройка разделов


Чтобы включить режим воспроизведения петли в инструменте, содержащем закольцованные семплы, выберите значок ![loop on][loop_on] в строке параметра :guilabel:`Играть петлю` в столбце :guilabel:`Глобальные` или в отдельных столбцах разделов инструмента в таблице параметров.

* ![loop on][loop_on] включает петлю,
* ![loop off][loop_off] или пустое значение ячейки выключает её.
* ![loop on and end][loop_on_end] включает петлю, а после отпускания клавиши семпл будет проигран до конца.

Глобальный раздел, как следует из его названия, позволяет ввести параметр для всего инструмента.
Глобальный параметр применяется только к разделам, в которых этот параметр не указан.
Это означает, что параметры отдельных разделов имеют приоритет над настройками глобального раздела.

В этом простом уроке мы не будем редактировать никакие другие параметры для работы инструмента.
Уже можно играть с помощью [виртуальной клавиатуры](manual/soundfont-editor/toolbar.md#doc_keyboard).

Однако, чтобы улучшить инструмент, рекомендуется ввести значение в строку :guilabel:`Огибающая громкости: затухание (сек)`, что предотвратит резкое прекращение звука при отпускании клавиши.
Другие параметры описаны в описании [таблиц](manual/soundfont-editor/editing-pages/instrument-editor.md#doc_table).


## Создание пресетов {#doc_preset}


На этом этапе предполагается, что один или несколько инструментов уже доступны для создания пресета.


### Что такое пресет?


Пресет является эквивалентом имени звукового патча из аппаратных синтезаторов.
Он виден снаружи SoundFont и идентифицируется номером банка и номером пресета.
SoundFont может иметь один или несколько пресетов.
Каждый пресет содержит один или несколько инструментов, так же как каждый инструмент содержит один или несколько семплов.


### Создание пресета и добавление инструментов


Во-первых, нажмите :guilabel:`Новый пресет` на [панели инструментов](manual/soundfont-editor/toolbar.md#doc_edit).
Введите имя.

Затем добавьте инструменты в пресет с помощью [перетаскивания](manual/soundfont-editor/tree.md#doc_dragdrop).
В дереве вы заметите, что в пресете появится один или несколько разделов.
Часто раздел может быть только один, как в случае пресета, содержащего один инструмент.

Можно создать столько же (или больше) пресетов, сколько и инструментов, а каждый пресет может содержать один или несколько инструментов.


### Настройка пресета


Изменение параметров пресетов может не потребоваться, поскольку:

* при создании пресета номер банка и номер пресета назначаются автоматически,
* при добавлении инструмента в пресет диапазон клавиш автоматически рассчитывается в соответствии с инструментом.

В рамках данного урока создание SoundFont завершено!


[loop_on]:     images/loop_on.png     "с петлёй"           {.inline}
[loop_off]:    images/loop_off.png    "без петли"          {.inline}
[loop_on_end]: images/loop_on_end.png "петля с окончанием" {.inline}
